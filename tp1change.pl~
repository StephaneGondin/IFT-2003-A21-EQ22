%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Fais
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
jeton(rouge).
jeton(jaune).
tableau(([[],[],[],[],[],[],[]])).

%√âtats de d√©part et √©tat final
etat_initial([],[],[],[],[],[],[]).
etat_final(). %???

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% colone X row    ( 7 x 6 )
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%

etat_initialdeux(['1','|','|','|','|','|'],
                        ['2','|','|','|','|','|'],
                        ['3','|','|','|','|','|'],
                        ['4','|','|','|','|','|'],
                        ['5','|','|','|','|','|'],
                        ['6','|','|','|','|','|'],
                        ['7','|','|','|','|','|']).

%%%
% Appel Du Jeux dans la fonction jeux . Le jeux se passe les parametres
% colonne et appelle les fonctions du joueur a l'IA. Les conditions de
% validation sont Ègalement appelÈes dans le mouvement.
%
% paramËtre a envoyer : 7 colonnes
%%%

jeux:- etat_initialdeux(Un,Deux,Trois,Quatre,Cinq,Six,Sept),
            jeux_recurrent(Un,Deux,Trois,Quatre,Cinq,Six,Sept).


      %     voirboard(Un,Deux,Trois,Quatre,Cinq,Six,Sept),
       %    question_utilisateur(Reponse),
       %    swap(Un,Deux,Trois,Quatre,Cinq,Six,Sept,Reponse,Retour),
       %    voir(Retour,' retour 1 fois'),
       %    valider_place_disponible(Retour),
       %    placer_jeton(Retour,jeton(rouge),Resultat),
       %    write(Resultat).




jeux_recurrent(Un,Deux,Trois,Quatre,Cinq,Six,Sept):-voirboard(Un,Deux,Trois,Quatre,Cinq,Six,Sept),
                                                    question_utilisateur(Reponse),
                                                    swap(Un,Deux,Trois,Quatre,Cinq,Six,Sept,Reponse,Retour),
                                                    valider_place_disponible(Retour),
                                                    placer_jeton(Retour,jeton(rouge),Resultat),
                                                    voir(Resultat,'resultat insertion'),
                                                    voir(Retour,'retour '),
                                                    jeux_recurrent(Un,Deux,Trois,Quatre,Cinq,Six,Sept).




%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Interface visuelle de base
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

voirboard(Un,Deux,Trois,Quatre,Cinq,Six,Sept):-voir(Un,'1'),voir(Deux,'2'),voir(Trois,'3'),voir(Quatre,'4'),voir(Cinq,'5'),voir(Six,'6'),voir(Sept,'7').

voir(X,Lettre):- write(X),write(Lettre),nl.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Swap semble long comme fonction, mais elle est bien simple. Elle
% recoit les colonnes en parametres. Elle recoit le parametre Y, qui
% proviens de l'utilisateur (un '1','2',etc) et retourne la colone dans
% Retour. On fait afficher la ligne grace a voir pour avoir un visuel.
% ex: Si Y==1 va a voir(Un,'1') et le retour de la colone  est Retour=Un
% ==== Elle nous permet a partir de chiffre de selectionner les colonne
% avec des noms dans la variable Retour===

swap(Un,Deux,Trois,Quatre,Cinq,Six,Sept,Y,Retour):- (Y==1,voir(Un,'1'),Retour=Un;Y==2,voir(Deux,'2'),Retour=Deux;Y==3,voir(Trois,'3'),Retour=Trois;Y==4,voir(Quatre,'4'),Retour=Quatre;Y==5,voir(Cinq,'5'),Retour=Cinq;Y==6,voir(Six,'1'),Retour=Six;Y==7,voir(Sept,'7'),Retour=Sept).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Questioner l'utilisateur sur son emplacement a mettre
% Parametre a prendre en charges: reponse utilisateur, retourne la
% colone. 1 a 7 seulement considere.
% %%%%%%%%%%%%%%%%%%%%%%%%%%

question_utilisateur(Reponse):-write('quelle colone desirez-vous jouer: reponse sous forme 1. 2. 3. 4. 5. 6. 7.'),write(' une autre reponse arrete le jeu:'),nl,read(Reponse),verifier_reponse(Reponse).
verifier_reponse(Reponse):-((Reponse=1);(Reponse=2);(Reponse=3);(Reponse=4);(Reponse=5);(Reponse=6);(Reponse=7)),write('votre reponse:'),write(Reponse),nl.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Pr√©dicats
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Place un jeton dans la colonne s'il y a une place disponible.
placer_jeton(Colonne,Jeton,Resultat):-append(Colonne,Jeton,Resultat).

%Valider s'il reste de la place dans une colonne pour placer une pi√®ce.
%retourne true ou false
valider_place_disponible(Colonne):- length(Colonne, N), N < 7,write('longeur dans la colone: '),write(N).


valider_verticale().
valider_horizontale().
valider_diagonale().

min().
max().
